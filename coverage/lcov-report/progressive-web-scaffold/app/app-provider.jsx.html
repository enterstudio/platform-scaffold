<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for progressive-web-scaffold/app/app-provider.jsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">progressive-web-scaffold/app</a> app-provider.jsx
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/33</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/18</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/24</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import React, {PropTypes} from 'react'<span class="cstat-no" title="statement not covered" ></span>
import {Router, Route, IndexRoute} from 'progressive-web-sdk/dist/routing'
import {browserHistory} from 'react-router'
import {triggerMobifyPageView} from 'progressive-web-sdk/dist/analytics'
import {Provider} from 'react-redux'
import * as appActions from './containers/app/actions'
import {getComponentType} from './utils/utils'
&nbsp;
// Containers
import App from './containers/app/container'
import Cart from './containers/cart/container'
import Home from './containers/home/container'
import Login from './containers/login/container'
import PLP from './containers/plp/container'
import PDP from './containers/pdp/container'
import CheckoutShipping from './containers/checkout-shipping/container'
import CheckoutPayment from './containers/checkout-payment/container'
import CheckoutConfirmation from './containers/checkout-confirmation/container'
import CheckoutHeader from './containers/checkout-header/container'
import CheckoutFooter from './containers/checkout-footer/container'<span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="fstat-no" title="function not covered" ></span></span></span></span></span></span></span></span></span></span></span></span>
&nbsp;
const AppProvider <span class="cstat-no" title="statement not covered" >= ({store<span class="fstat-no" title="function not covered" >}) =&gt; {</span></span>
    /**
     * Given the current router state, get the corresponding URL on the
     * desktop site. Ignores #fragments in the router state.
     */
    const getURL <span class="cstat-no" title="statement not covered" >= (router<span class="fstat-no" title="function not covered" >State) </span>=&gt; {</span>
<span class="cstat-no" title="statement not covered" >        return [</span>
            window.location.protocol,
            '//',
            window.location.host,
            routerState.location.pathname,
            routerState.location.search
        ].join('')
    }
&nbsp;
    const shouldFetchPage <span class="cstat-no" title="statement not covered" >= (router<span class="fstat-no" title="function not covered" >State) =&gt; router</span>State.routes[1].fetchPage !== 'false'</span>
&nbsp;
    const getPageComponent <span class="cstat-no" title="statement not covered" >= (router<span class="fstat-no" title="function not covered" >State) =&gt; getComp</span>onentType(routerState.routes[1].component)</span>
&nbsp;
    const getRouteName <span class="cstat-no" title="statement not covered" >= (router<span class="fstat-no" title="function not covered" >State) =&gt; rou</span>terState.routes[1].routeName</span>
&nbsp;
    const dispatchRouteChanged <span class="cstat-no" title="statement not covered" >= (nextSt<span class="fstat-no" title="function not covered" >ate) =&gt; store.dispatc</span>h(appActions.onRouteChanged(getURL(nextState), getPageComponent(nextState)))</span>
&nbsp;
    const dispatchFetchPage <span class="cstat-no" title="statement not covered" >= (nextSt<span class="fstat-no" title="function not covered" >ate) =&gt; store.disp</span>atch(appActions.fetchPage(getURL(nextState), getPageComponent(nextState), getRouteName(nextState)))</span>
&nbsp;
    const onEnter <span class="cstat-no" title="statement not covered" >= (nextSt<span class="fstat-no" title="function not covered" >ate) =&gt; </span>{</span>
        triggerMobifyPageView(nextState.routes[1].routeName)
<span class="cstat-no" title="statement not covered" >        dispatchRouteChanged(nextState)</span>
<span class="cstat-no" title="statement not covered" >        if (shouldFetchPage(nextState)) {</span>
<span class="cstat-no" title="statement not covered" >            dispatchFetchPage(nextState)</span>
        }
    }
&nbsp;
    const onChange <span class="cstat-no" title="statement not covered" >= (prevSt<span class="fstat-no" title="function not covered" >ate, next</span>State) =&gt; {</span>
        const prevURL <span class="cstat-no" title="statement not covered" >= getURL(prevState</span>)
        const nextURL <span class="cstat-no" title="statement not covered" >= getURL(nextState</span>)
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (nextURL !== prevURL) {</span>
<span class="cstat-no" title="statement not covered" >            dispatchRouteChanged(nextState)</span>
<span class="cstat-no" title="statement not covered" >            if (shouldFetchPage(nextState)) {</span>
<span class="cstat-no" title="statement not covered" >                dispatchFetchPage(nextState)</span>
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        store.dispatch(appActions.removeAllNotifications())</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return (</span>
        &lt;Provider store={store}&gt;
            &lt;Router history={browserHistory}&gt;
                &lt;Route path="/" component={App} onEnter={onEnter} onChange={onChange}&gt;
                    &lt;IndexRoute component={Home} routeName="home" /&gt;
                    &lt;Route component={Cart} path="checkout/cart/" routeName="cart" fetchPage="false" /&gt;
                    &lt;Route component={Login} path="customer/account/login/" routeName="signin" /&gt;
                    &lt;Route component={Login} path="customer/account/create/" routeName="register" /&gt;
                    &lt;Route component={PLP} path="potions.html" routeName="productListPage" /&gt;
                    &lt;Route component={PLP} path="books.html" routeName="productListPage" /&gt;
                    &lt;Route component={PLP} path="ingredients.html" routeName="productListPage" /&gt;
                    &lt;Route component={PLP} path="supplies.html" routeName="productListPage" /&gt;
                    &lt;Route component={PLP} path="new-arrivals.html" routeName="productListPage" /&gt;
                    &lt;Route component={PLP} path="charms.html" routeName="productListPage" /&gt;
                    &lt;Route component={PDP} path="*.html" routeName="productDetailsPage" /&gt;
                    &lt;Route component={CheckoutShipping} path="checkout/shipping/" routeName="checkingShipping" fetchPage="false" Header={CheckoutHeader} Footer={CheckoutFooter} /&gt;
                    &lt;Route component={CheckoutPayment} path="checkout/payment/" routeName="checkingPayment" fetchPage="false" Header={CheckoutHeader} Footer={CheckoutFooter} /&gt;
                    &lt;Route component={CheckoutConfirmation} path="checkout/confirmation/" routeName="checkingConfirmation" fetchPage="false" Header={CheckoutHeader} Footer={CheckoutFooter} /&gt;
                &lt;/Route&gt;
            &lt;/Router&gt;
        &lt;/Provider&gt;
    )
}
&nbsp;
<span class="cstat-no" title="statement not covered" >AppProvider.propTypes = {</span>
    store: PropTypes.object
}
&nbsp;
export default AppProvider
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jan 30 2017 16:43:01 GMT-0800 (PST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
